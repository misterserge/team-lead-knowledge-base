# TCO (Total Cost of Ownership)

**TCO (Total Cost of Ownership)** — это совокупная стоимость владения системой за весь её жизненный цикл.

> TCO = не только сколько стоит "построить", но и сколько стоит "жить с этим решением".

---

## Состав TCO

TCO обычно включает четыре основные категории затрат:

### 1. Initial costs — первичные затраты

- Разработка
- Лицензии
- Инфраструктура
- Внедрение

### 2. Operational costs — операционные расходы

- Поддержка
- Хостинг
- DevOps
- Мониторинг
- Обновления
- Обучение

### 3. Maintenance costs — обслуживание

- Багфиксы
- Обновление зависимостей
- Технический долг

### 4. Upgrade / migration costs — будущие затраты

- Миграции
- Масштабирование
- Переход на новые технологии

---

## Зачем архитектору думать о TCO

| Причина | Описание |
|---------|----------|
| **Устойчивость решения** | Помогает выбрать не самое "модное", а самое устойчивое решение |
| **Обоснование для бизнеса** | Позволяет объяснить, почему "дешевле сейчас" ≠ "дешевле через 3 года" |
| **Долгосрочное планирование** | Учитывает скрытые затраты и риски |

> **Пример:** "Сэкономим $20k на лицензии — потеряем $60k на поддержке и простоях".

---

## Пример из практики

### Выбор между self-hosted и managed решением

При выборе между **self-hosted ClickHouse** и **облачным managed-сервисом**:

**Self-hosted:**
- ✅ Дешевле на старте
- ❌ Требует DevOps-поддержки
- ❌ Нужен мониторинг
- ❌ Бэкапы и обновления вручную

**Managed (облако):**
- ❌ Дороже на старте
- ✅ Auto-scaling
- ✅ Автоматические обновления
- ✅ Встроенный мониторинг

**Результат:** Через 3 года TCO self-hosted оказался на **25% выше**, чем у облачного решения с auto-scaling.

---

## Формула расчёта TCO

```
TCO = Initial + (Operational × Years) + Maintenance + Migration
```

### Пример расчёта (3 года)

| Статья расходов | Self-hosted | Managed Cloud |
|-----------------|-------------|---------------|
| Первичные затраты | $50k | $80k |
| Операционные (в год) | $40k | $25k |
| Обслуживание (в год) | $15k | $5k |
| **Итого за 3 года** | **$215k** | **$170k** |

---

## Когда TCO особенно критично

- ✅ Выбор технологического стека
- ✅ Build vs Buy решения
- ✅ Облако vs on-premise
- ✅ Монолит vs микросервисы
- ✅ Managed services vs self-hosted
- ✅ Open-source vs коммерческие лицензии

---

## Связь с другими практиками

TCO связано с:

- **ROI (Return on Investment)** — возврат инвестиций
- **Technical Strategy** — долгосрочное планирование архитектуры
- **Platform Engineering** — построение внутренних платформ
- **FinOps** — оптимизация облачных расходов
