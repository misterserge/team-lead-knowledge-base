# Hydration –≤ React

**Hydration** ‚Äî —ç—Ç–æ –ø—Ä–æ—Ü–µ—Å—Å, –∫–æ–≥–¥–∞ React –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ "–ø—Ä–∏–≤—è–∑—ã–≤–∞–µ—Ç" JavaScript-–æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫ —É–∂–µ –æ—Ç—Ä–µ–Ω–¥–µ—Ä–µ–Ω–Ω–æ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ HTML-—Å—Ç—Ä–∞–Ω–∏—Ü–µ (SSR –∏–ª–∏ SSG).

> HTML —É–∂–µ –æ—Ç–æ–±—Ä–∞–∂—ë–Ω, –Ω–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –µ—â—ë –Ω–µ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–µ–Ω, –ø–æ–∫–∞ React –Ω–µ –≤—ã–ø–æ–ª–Ω–∏—Ç JS-–∫–æ–¥ –∏ –Ω–µ "–æ–∂–∏–≤–∏—Ç" –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã.

–ò–º–µ–Ω–Ω–æ –ø–æ—ç—Ç–æ–º—É –≥–∏–¥—Ä–∞—Ç–∞—Ü–∏—è –Ω–∞–ø—Ä—è–º—É—é –≤–ª–∏—è–µ—Ç –Ω–∞ **TTI (Time to Interactive)** ‚Äî —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤–∏–¥–Ω–æ, –Ω–æ –æ–Ω–∞ –µ—â—ë –Ω–µ —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ –¥–µ–π—Å—Ç–≤–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

---

## –ü–æ—á–µ–º—É hydration –≤–ª–∏—è–µ—Ç –Ω–∞ TTI

–î–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≥–∏–¥—Ä–∞—Ç–∞—Ü–∏–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ:

1. **–ó–∞–≥—Ä—É–∑–∏—Ç—å JS bundle** ‚Äî —Å–∫–∞—á–∞—Ç—å –≤–µ—Å—å JavaScript –∫–æ–¥
2. **–í—ã–ø–æ–ª–Ω–∏—Ç—å –µ–≥–æ** ‚Äî —á–∞—Å—Ç–æ —Ç—è–∂—ë–ª—ã–π CPU-bound –ø—Ä–æ—Ü–µ—Å—Å
3. **–°–æ–ø–æ—Å—Ç–∞–≤–∏—Ç—å —Å —Å–µ—Ä–≤–µ—Ä–Ω–æ–π —Ä–∞–∑–º–µ—Ç–∫–æ–π** ‚Äî React –¥–µ–ª–∞–µ—Ç diff —Å HTML
4. **–ù–∞–≤–µ—Å–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π** ‚Äî –ø–æ–¥–∫–ª—é—á–∏—Ç—å onClick, onChange –∏ —Ç.–¥.

**–¢–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —ç—Ç–æ–≥–æ UI —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–º.**

---

## –ö–æ–≥–¥–∞ hydration –≤—ã–∑—ã–≤–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—ã

| –ü—Ä–æ–±–ª–µ–º–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|----------|
| **–ë–æ–ª—å—à–æ–π JS-bundle** | –î–æ–ª–≥–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∏ –ø–∞—Ä—Å–∏–Ω–≥ –∫–æ–¥–∞ |
| **–°–ª–æ–∂–Ω—ã–µ React-–¥–µ—Ä–µ–≤—å—è** | –ì–ª—É–±–æ–∫–∏–π diff —Ç—Ä–µ–±—É–µ—Ç –±–æ–ª—å—à–µ –≤—Ä–µ–º–µ–Ω–∏ |
| **–ú–Ω–æ–≥–æ —Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫** | –£–≤–µ–ª–∏—á–∏–≤–∞—é—Ç —Ä–∞–∑–º–µ—Ä –±–∞–Ω–¥–ª–∞ |
| **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ lazy-loading** | –í–µ—Å—å –∫–æ–¥ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Å—Ä–∞–∑—É |
| **–ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Å—Ç–µ–π—Ç—ã –∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã** | Context, Redux ‚Äî –∑–∞–º–µ–¥–ª—è—é—Ç –≥–∏–¥—Ä–∞—Ç–∞—Ü–∏—é |
| **Heavy —ç—Ñ—Ñ–µ–∫—Ç—ã** | useEffect —Å —Ç—è–∂—ë–ª—ã–º–∏ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è–º–∏ |

---

## –ß—Ç–æ –ø–æ–º–æ–∂–µ—Ç —É–ª—É—á—à–∏—Ç—å TTI –≤ React

### 1. Partial Hydration (—á–∞—Å—Ç–∏—á–Ω–∞—è –≥–∏–¥—Ä–∞—Ç–∞—Ü–∏—è)

–ì–∏–¥—Ä–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –≤–∏–¥–∏–º—É—é —á–∞—Å—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –æ—Å—Ç–∞–ª—å–Ω–æ–µ ‚Äî –ø–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é.

**–ü—Ä–∏–º–µ—Ä—ã:**
- Astro Islands
- Next.js 13 (App Router)
- Qwik

### 2. Selective Hydration (–≤—ã–±–æ—Ä–æ—á–Ω–∞—è –≥–∏–¥—Ä–∞—Ç–∞—Ü–∏—è)

React 18 + Suspense –ø–æ–∑–≤–æ–ª—è–µ—Ç –≥–∏–¥—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –¥—Ä—É–≥ –æ—Ç –¥—Ä—É–≥–∞.

```jsx
<Suspense fallback={<Spinner />}>
  <HeavyComponent />
</Suspense>
```

### 3. Server Components (RSC)

React Server Components –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ ‚Äî –Ω–µ –ø–æ–ø–∞–¥–∞—é—Ç –≤ –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–π bundle.

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ù—É–ª–µ–≤–æ–π JS –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ –¥–ª—è —Å–µ—Ä–≤–µ—Ä–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- –ü—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫ –ë–î –∏–∑ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π code splitting

### 4. Code splitting / lazy()

–†–∞–∑–±–∏–µ–Ω–∏–µ –∫–æ–¥–∞ –Ω–∞ —á–∞–Ω–∫–∏ –∏ –ª–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞.

```jsx
const HeavyChart = lazy(() => import('./HeavyChart'));
```

### 5. Streaming SSR

–û—Ç–ø—Ä–∞–≤–∫–∞ HTML –ø–æ —á–∞—Å—Ç—è–º, –±–µ–∑ –æ–∂–∏–¥–∞–Ω–∏—è –≤—Å–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã.

Next.js 13+:
```jsx
export default async function Page() {
  return (
    <Suspense fallback={<Loading />}>
      <AsyncComponent />
    </Suspense>
  );
}
```

### 6. –£–º–µ–Ω—å—à–µ–Ω–∏–µ client-side JS

- –ú–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- Tree-shaking
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ª–µ–≥–∫–æ–≤–µ—Å–Ω—ã—Ö –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤ –±–∏–±–ª–∏–æ—Ç–µ–∫
- –ê–Ω–∞–ª–∏–∑ –±–∞–Ω–¥–ª–∞ —á–µ—Ä–µ–∑ `webpack-bundle-analyzer`

---

## –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ–¥—Ö–æ–¥–æ–≤

| –ü–æ–¥—Ö–æ–¥ | TTI | –°–ª–æ–∂–Ω–æ—Å—Ç—å | –ü–æ–¥–¥–µ—Ä–∂–∫–∞ |
|--------|-----|-----------|-----------|
| **–¢—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã–π SSR** | üü° –°—Ä–µ–¥–Ω–∏–π | –ù–∏–∑–∫–∞—è | –í–µ–∑–¥–µ |
| **Selective Hydration** | üü¢ –•–æ—Ä–æ—à–∏–π | –°—Ä–µ–¥–Ω—è—è | React 18+ |
| **Partial Hydration** | üü¢ –û—Ç–ª–∏—á–Ω—ã–π | –í—ã—Å–æ–∫–∞—è | Next.js 13+, Astro |
| **Server Components** | üü¢ –û—Ç–ª–∏—á–Ω—ã–π | –í—ã—Å–æ–∫–∞—è | Next.js 13+, React 19 |
| **Islands** | üü¢ –û—Ç–ª–∏—á–Ω—ã–π | –°—Ä–µ–¥–Ω—è—è | Astro, Qwik |

---

## –ü—Ä–∏–º–µ—Ä –ø—Ä–æ–±–ª–µ–º—ã

### –î–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

```jsx
// –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≥–∏–¥—Ä–∏—Ä—É—é—Ç—Å—è —Å—Ä–∞–∑—É
function Page() {
  return (
    <>
      <Header />
      <HeavyChart data={bigData} />
      <Footer />
    </>
  );
}
// TTI = 4.5 —Å–µ–∫
```

### –ü–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

```jsx
// Lazy load —Ç—è–∂—ë–ª—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
const HeavyChart = lazy(() => import('./HeavyChart'));

function Page() {
  return (
    <>
      <Header />
      <Suspense fallback={<ChartSkeleton />}>
        <HeavyChart data={bigData} />
      </Suspense>
      <Footer />
    </>
  );
}
// TTI = 1.8 —Å–µ–∫
```

---

## –°–≤—è–∑—å —Å –¥—Ä—É–≥–∏–º–∏ –∫–æ–Ω—Ü–µ–ø—Ü–∏—è–º–∏

Hydration —Å–≤—è–∑–∞–Ω–∞ —Å:

- **SSR (Server-Side Rendering)** ‚Äî —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- **SSG (Static Site Generation)** ‚Äî —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è
- **TTI (Time to Interactive)** ‚Äî –º–µ—Ç—Ä–∏–∫–∞ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- **FCP / LCP** ‚Äî –º–µ—Ç—Ä–∏–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- **Progressive Enhancement** ‚Äî –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ UX

---

## –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞

- **React DevTools Profiler** ‚Äî –∞–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- **Chrome DevTools ‚Üí Performance** ‚Äî –∞–Ω–∞–ª–∏–∑ –≥–∏–¥—Ä–∞—Ç–∞—Ü–∏–∏
- **Lighthouse** ‚Äî –º–µ—Ç—Ä–∏–∫–∏ TTI
- **Next.js Build Analyzer** ‚Äî –∞–Ω–∞–ª–∏–∑ —Ä–∞–∑–º–µ—Ä–∞ –±–∞–Ω–¥–ª–∞
